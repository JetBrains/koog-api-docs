<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>agents-features-event-handler</title>
<link href="../../../images/logo-icon.svg" rel="icon" type="image/svg"><script>var pathToRoot = "../../../";</script>
    <script>document.documentElement.classList.replace("no-js", "js");</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
      if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
          document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
      } else {
        const savedDarkMode = JSON.parse(storage)
        if (savedDarkMode === true) {
          document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
      }
    </script>
<script type="text/javascript" src="https://unpkg.com/kotlin-playground@1/dist/playground.min.js" async></script>
<script type="text/javascript" src="../../../scripts/sourceset_dependencies.js" async></script>
<link href="../../../styles/style.css" rel="Stylesheet">
<link href="../../../styles/main.css" rel="Stylesheet">
<link href="../../../styles/prism.css" rel="Stylesheet">
<link href="../../../styles/logo-styles.css" rel="Stylesheet">
<link href="../../../ui-kit/ui-kit.min.css" rel="Stylesheet">
<script type="text/javascript" src="../../../scripts/safe-local-storage_blocking.js"></script>
<script type="text/javascript" src="../../../scripts/navigation-loader.js" async></script>
<script type="text/javascript" src="../../../scripts/platform-content-handler.js" async></script>
<script type="text/javascript" src="../../../scripts/main.js" defer></script>
<script type="text/javascript" src="../../../scripts/prism.js" async></script>
<script type="text/javascript" src="../../../ui-kit/ui-kit.min.js" defer></script></head>
<body>
<div class="root">
    <header class="navigation theme-dark" id="navigation-wrapper" role="banner">
<a class="library-name--link" href="../../../index.html" tabindex="1">
                    koog
            </a>        <button class="navigation-controls--btn navigation-controls--btn_toc ui-kit_mobile-only" id="toc-toggle" type="button">Toggle table of contents
        </button>
        <div class="navigation-controls--break ui-kit_mobile-only"></div>
        <div class="library-version" id="library-version">0.6.3-SNAPSHOT
        </div>
        <div class="navigation-controls">
        <ul class="filter-section filter-section_loading" id="filter-section" aria-label="Target filter">
                <button class="platform-tag platform-selector common-like" data-active="" aria-pressed="true" data-filter=":agents:agents-features:agents-features-event-handler/commonMain">common</button>
            <div class="dropdown filter-section--dropdown" data-role="dropdown" id="filter-section-dropdown">
                <button class="button button_dropdown filter-section--dropdown-toggle" role="combobox" data-role="dropdown-toggle" aria-controls="platform-tags-listbox" aria-haspopup="listbox" aria-expanded="false" aria-label="Toggle source sets"></button>
                <ul role="listbox" id="platform-tags-listbox" class="dropdown--list" data-role="dropdown-listbox" aria-label="Target filter">
                    <div class="dropdown--header"><span>Target filter</span>
                        <button class="button" data-role="dropdown-toggle" aria-label="Close target filter">
                            <i class="ui-kit-icon ui-kit-icon_cross"></i>
                        </button>
                    </div>
                        <li role="option" class="dropdown--option platform-selector-option common-like" tabindex="0">
                            <label class="checkbox">
                                <input type="checkbox" class="checkbox--input" id=":agents:agents-features:agents-features-event-handler/commonMain" data-filter=":agents:agents-features:agents-features-event-handler/commonMain">
                                <span class="checkbox--icon"></span>
                                common
                            </label>
                        </li>
                </ul>
                <div class="dropdown--overlay"></div>
            </div>
        </ul>
            <button class="navigation-controls--btn navigation-controls--btn_theme" id="theme-toggle-button" type="button">Switch theme
            </button>
            <div class="navigation-controls--btn navigation-controls--btn_search" id="searchBar" role="button">Search in
                API
            </div>
        </div>
    </header>
    <div id="container">
        <nav id="leftColumn" class="sidebar" data-item-type="SECTION" data-item-config="{&quot;defaultSize&quot;: 280, &quot;minSize&quot;: 200, &quot;maxSize&quot;: 400}">
            <a class="toc--skip-link" href="#main">Skip to content</a>
            <div class="dropdown theme-dark_mobile" data-role="dropdown" id="toc-dropdown">
                <ul role="listbox" id="toc-listbox" class="dropdown--list dropdown--list_toc-list" data-role="dropdown-listbox" aria-label="Table of contents">
                    <div class="dropdown--header">
                            <span>
                                    koog
                            </span>
                        <button class="button" data-role="dropdown-toggle" aria-label="Close table of contents">
                            <i class="ui-kit-icon ui-kit-icon_cross"></i>
                        </button>
                    </div>
                    <div class="sidebar--inner" id="sideMenu"></div>
                </ul>
                <div class="dropdown--overlay"></div>
            </div>
        </nav>
        <div id="resizer" class="resizer" data-item-type="BAR"></div>
        <div id="main" data-item-type="SECTION" role="main">
<div class="main-content" id="content" pageids="agents-features-event-handler::////PointingToDeclaration//-1417255257">
  <div class="breadcrumbs"></div>
  <div class="cover ">
    <h1 class="cover"><span><span>agents-features-event-handler</span></span></h1>
    <div class="platform-hinted UnderCoverText" data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":agents:agents-features:agents-features-event-handler/commonMain"><p class="paragraph">Provides <code class="lang-kotlin">EventHandler</code> feature that allows to listen and react to events in the agent execution.</p><h3 class="">Overview</h3><p class="paragraph">The agents-features-event-handler module provides a powerful event handling system for AI agents, allowing developers to hook into various events in the agent's lifecycle. This enables monitoring, logging, debugging, and extending agent behavior by reacting to specific events during execution.</p><p class="paragraph">Key features include:</p><ul><li><p class="paragraph">Monitoring agent lifecycle events (creation, start, completion, error)</p></li><li><p class="paragraph">Tracking strategy execution (starting, completed)</p></li><li><p class="paragraph">Observing node processing in the execution graph</p></li><li><p class="paragraph">Intercepting LLM calls and responses</p></li><li><p class="paragraph">Monitoring tool calls, validation errors, failures, and results</p></li></ul><h3 class="">Using in your project</h3><p class="paragraph">To use the event handler feature in your project, add the following dependency:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">dependencies {<br>    implementation("ai.koog.agents:agents-features-event-handler:$version")<br>}</code></pre><span class="copy-tooltip"><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div><span class="copy-icon"></span></span></div><p class="paragraph">Then, install the EventHandler feature when creating your agent:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val myAgent = AIAgent(<br>    // other configuration parameters<br>) {<br>    handleEvents {<br>        // Configure event handlers here<br>        onAgentStarting { eventContext -&gt;<br>            println("Agent starting: ${eventContext.agent.id}")<br>        }<br><br>        onAgentCompleted { eventContext -&gt;<br>            println("Agent finished with result: ${eventContext.result}")<br>        }<br>    }<br>}</code></pre><span class="copy-tooltip"><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div><span class="copy-icon"></span></span></div><h3 class="">Using in unit tests</h3><p class="paragraph">For testing agents with event handling capabilities, you can use the EventHandler to verify that specific events occur during test execution:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">// Create a test agent with event handling<br>val testAgent = AIAgent(<br>    // other test configuration<br>) {<br>    // Track events for testing<br>    var toolCalled = false<br>    var agentFinished = false<br><br>    handleEvents {<br>        onToolCallStarting { eventContext -&gt;<br>            toolCalled = true<br>            println("[DEBUG_LOG] Tool called: ${eventContext.toolName}")<br>        }<br><br>        onAgentCompleted { eventContext -&gt;<br>            agentFinished = true<br>            println("[DEBUG_LOG] Agent finished with result: ${eventContext.result}")<br>        }<br>    }<br><br>    // Enable testing mode<br>    withTesting()<br>}<br><br>// After running the agent, assert that expected events occurred<br>assert(toolCalled) { "Expected tool to be called" }<br>assert(agentFinished) { "Expected agent to finish" }</code></pre><span class="copy-tooltip"><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div><span class="copy-icon"></span></span></div><h3 class="">Example of usage</h3><p class="paragraph">Here's an example of using the EventHandler to monitor and log various events during agent execution:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val agent = AIAgent(<br>    // other configuration parameters<br>) {<br>    handleEvents {<br>        // Log LLM interactions<br>        onLLMCallStarting { eventContext -&gt;<br>            println("Sending prompt to LLM: ${eventContext.prompt}")<br>        }<br><br>        onLLMCallCompleted { eventContext -&gt;<br>            println("Received ${eventContext.responses.size} response(s) from LLM")<br>        }<br><br>        // Monitor tool usage<br>        onToolCallStarting { eventContext -&gt;<br>            println("Tool called: ${eventContext.toolName} with args: ${eventContext.toolArgs}")<br>        }<br><br>        onToolCallCompleted { eventContext -&gt;<br>            println("Tool result: ${eventContext.result}")<br>        }<br><br>        onToolCallFailed { eventContext -&gt;<br>            println("Tool failed: ${eventContext.throwable.message}")<br>        }<br><br>        // Track agent progress<br>        onStrategyStarting { eventContext -&gt;<br>            println("Strategy started: ${eventContext.strategy.name}")<br>        }<br><br>        onStrategyCompleted { eventContext -&gt;<br>            println("Strategy finished with result: ${eventContext.result}")<br>        }<br>    }<br>}</code></pre><span class="copy-tooltip"><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div><span class="copy-icon"></span></span></div><p class="paragraph">This example demonstrates how to monitor LLM interactions, track tool usage, and observe agent progress using the EventHandler feature.</p></div></div>
  </div>
  <h2 class="">Packages</h2>
  <div class="table"><a data-name="1886898775%2FPackages%2F-1417255257" anchor-label="ai.koog.agents.features.eventHandler.feature" id="1886898775%2FPackages%2F-1417255257" data-filterable-set=":agents:agents-features:agents-features-event-handler/commonMain"></a>
    <div class="table-row table-row_platform-tagged" data-filterable-current=":agents:agents-features:agents-features-event-handler/commonMain" data-filterable-set=":agents:agents-features:agents-features-event-handler/commonMain">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="ai.koog.agents.features.eventHandler.feature/index.html">ai.koog.agents.features.eventHandler.feature</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1886898775%2FPackages%2F-1417255257"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right platform-tags--wrapper">
            <div class="platform-tags no-gutters">
              <div class="platform-tag common-like">common</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
  </div>
</div>
    <div class="footer">
        <div class="footer--container">
            <a href="#content" id="go-to-top-link" class="footer--button footer--button_go-to-top"></a>
            <div class="footer--content">
                <div>
                    <span>Generated by </span>
                    <a class="footer--link footer--link_external" href="https://github.com/Kotlin/dokka">
                        Dokka
                    </a>
                    <div>Copyright Â© 2000-2025 JetBrains s.r.o.</div>
                </div>
            </div>
        </div>
    </div>
        </div>
    </div>
</div>
</body>
</html>