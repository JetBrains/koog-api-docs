<!doctype html>
<html class="no-js">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>vector-storage</title>
<link href="../../images/logo-icon.svg" rel="icon" type="image/svg">    <script>var pathToRoot = "../../";</script>
    <script>document.documentElement.classList.replace("no-js","js");</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="https://unpkg.com/kotlin-playground@1/dist/playground.min.js" async></script>
<script type="text/javascript" src="../../scripts/sourceset_dependencies.js" async></script>
<link href="../../styles/style.css" rel="Stylesheet">
<link href="../../styles/main.css" rel="Stylesheet">
<link href="../../styles/prism.css" rel="Stylesheet">
<link href="../../styles/logo-styles.css" rel="Stylesheet">
<link href="../../styles/font-jb-sans-auto.css" rel="Stylesheet">
<link href="../../ui-kit/ui-kit.min.css" rel="Stylesheet">
<script type="text/javascript" src="../../scripts/clipboard.js" async></script>
<script type="text/javascript" src="../../scripts/navigation-loader.js" async></script>
<script type="text/javascript" src="../../scripts/platform-content-handler.js" async></script>
<script type="text/javascript" src="../../scripts/main.js" defer></script>
<script type="text/javascript" src="../../scripts/prism.js" async></script>
<script type="text/javascript" src="../../ui-kit/ui-kit.min.js" defer></script>
<script type="text/javascript" src="../../scripts/symbol-parameters-wrapper_deferred.js" defer></script></head>
<body>
    <div class="root">
    <nav class="navigation theme-dark" id="navigation-wrapper">
<a class="library-name--link" href="../../index.html">
                    koog-agents
            </a>        <button class="navigation-controls--btn navigation-controls--btn_toc ui-kit_mobile-only" id="toc-toggle" type="button">Toggle table of contents
        </button>
        <div class="navigation-controls--break ui-kit_mobile-only"></div>
        <div class="library-version" id="library-version">0.3.0
        </div>
        <div class="navigation-controls">
        <div class="filter-section filter-section_loading" id="filter-section">
                <button class="platform-tag platform-selector common-like" data-active="" data-filter=":rag:vector-storage/commonMain">common</button>
                <button class="platform-tag platform-selector jvm-like" data-active="" data-filter=":rag:vector-storage/jvmMain">jvm</button>
            <div class="dropdown filter-section--dropdown" data-role="dropdown" id="filter-section-dropdown">
                <button class="button button_dropdown filter-section--dropdown-toggle" role="combobox" data-role="dropdown-toggle" aria-controls="platform-tags-listbox" aria-haspopup="listbox" aria-expanded="false" aria-label="Toggle source sets"></button>
                <ul role="listbox" id="platform-tags-listbox" class="dropdown--list" data-role="dropdown-listbox">
                    <div class="dropdown--header"><span>Platform filter</span>
                        <button class="button" data-role="dropdown-toggle" aria-label="Close platform filter">
                            <i class="ui-kit-icon ui-kit-icon_cross"></i>
                        </button>
                    </div>
                        <li role="option" class="dropdown--option platform-selector-option common-like" tabindex="0">
                            <label class="checkbox">
                                <input type="checkbox" class="checkbox--input" id=":rag:vector-storage/commonMain" data-filter=":rag:vector-storage/commonMain">
                                <span class="checkbox--icon"></span>
                                common
                            </label>
                        </li>
                        <li role="option" class="dropdown--option platform-selector-option jvm-like" tabindex="0">
                            <label class="checkbox">
                                <input type="checkbox" class="checkbox--input" id=":rag:vector-storage/jvmMain" data-filter=":rag:vector-storage/jvmMain">
                                <span class="checkbox--icon"></span>
                                jvm
                            </label>
                        </li>
                </ul>
                <div class="dropdown--overlay"></div>
            </div>
        </div>
            <button class="navigation-controls--btn navigation-controls--btn_theme" id="theme-toggle-button" type="button">Switch theme
            </button>
            <div class="navigation-controls--btn navigation-controls--btn_search" id="searchBar" role="button">Search in
                API
            </div>
        </div>
    </nav>
        <div id="container">
            <div class="sidebar" id="leftColumn">
                <div class="dropdown theme-dark_mobile" data-role="dropdown" id="toc-dropdown">
                    <ul role="listbox" id="toc-listbox" class="dropdown--list dropdown--list_toc-list" data-role="dropdown-listbox">
                        <div class="dropdown--header">
                            <span>
                                    koog-agents
                            </span>
                            <button class="button" data-role="dropdown-toggle" aria-label="Close table of contents">
                                <i class="ui-kit-icon ui-kit-icon_cross"></i>
                            </button>
                        </div>
                        <div class="sidebar--inner" id="sideMenu"></div>
                    </ul>
                    <div class="dropdown--overlay"></div>
                </div>
            </div>
            <div id="main">
<div class="main-content" id="content" pageids="vector-storage::////PointingToDeclaration//-1162451514">
  <div class="breadcrumbs"></div>
  <div class="cover ">
    <h1 class="cover"><span><span>vector-storage</span></span></h1>
    <div class="platform-hinted UnderCoverText with-platform-tabs" data-platform-hinted="data-platform-hinted">
      <div class="platform-bookmarks-row" data-toggle-list="data-toggle-list"><button class="platform-bookmark" data-filterable-current=":rag:vector-storage/commonMain" data-filterable-set=":rag:vector-storage/commonMain" data-active="" data-toggle=":rag:vector-storage/commonMain">common</button><button class="platform-bookmark" data-filterable-current=":rag:vector-storage/jvmMain" data-filterable-set=":rag:vector-storage/jvmMain" data-toggle=":rag:vector-storage/jvmMain">jvm</button></div>
<div class="content sourceset-dependent-content" data-active="" data-togglable=":rag:vector-storage/commonMain"><p class="paragraph">A module that provides vector-based document storage and retrieval capabilities for Retrieval-Augmented Generation (RAG) systems.</p><h3 class="">Overview</h3><p class="paragraph">The vector-storage module extends the rag-base module by implementing document storage with vector embeddings. It enables semantic search and similarity-based document retrieval by converting documents into vector representations. Key components include:</p><ul><li><p class="paragraph">The <code class="lang-kotlin">VectorStorage</code> interface that extends <code class="lang-kotlin">DocumentStorageWithPayload</code> to store documents with their vector embeddings</p></li><li><p class="paragraph">The <code class="lang-kotlin">DocumentEmbedder</code> interface for converting documents into vector representations</p></li><li><p class="paragraph">The <code class="lang-kotlin">TextDocumentEmbedder</code> implementation that works with text documents</p></li><li><p class="paragraph">The <code class="lang-kotlin">EmbeddingBasedDocumentStorage</code> class that implements <code class="lang-kotlin">RankedDocumentStorage</code> using vector embeddings for similarity ranking</p></li></ul><p class="paragraph">This module bridges the gap between raw document storage and semantic search capabilities by leveraging vector embeddings to represent document content. It allows for efficient retrieval of documents based on semantic similarity to queries rather than just keyword matching.</p><h3 class="">Example of usage</h3><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">// Example of using VectorStorage with a TextDocumentEmbedder<br>suspend fun createVectorBasedStorage() {<br>    // Create a document embedder<br>    val textReader = object : TextDocumentReader&lt;TextDocument&gt; {<br>        override suspend fun read(document: TextDocument): String = document.content<br>    }<br>    // This would be replaced with your specific Embedder implementation<br>    val client: LLMEmbeddingProvider = YourEmbeddingProviderImplementation()<br>    val model: LLModel = YourEmbeddingModel<br>    val embedder = LLMEmbedder(client, model)<br>    val documentEmbedder = TextDocumentEmbedder(textReader, embedder)<br><br>    // Create a vector storage implementation<br>    // This would be replaced with your specific VectorStorage implementation<br>    val vectorStorage: VectorStorage&lt;TextDocument&gt; = YourVectorStorageImplementation()<br><br>    // Create the embedding-based document storage<br>    val storage = EmbeddingBasedDocumentStorage(documentEmbedder, vectorStorage)<br><br>    return storage<br>}<br><br>// Example of storing and retrieving documents based on semantic similarity<br>suspend fun findSimilarDocuments(storage: RankedDocumentStorage&lt;TextDocument&gt;) {<br>    // Store multiple documents<br>    storage.store(TextDocument("Neural networks are a type of machine learning model."))<br>    storage.store(TextDocument("Deep learning uses multiple layers of neural networks."))<br>    storage.store(TextDocument("Transformers are a type of neural network architecture."))<br>    storage.store(TextDocument("The capital of France is Paris."))<br><br>    // Find documents semantically similar to a query<br>    val query = "How do artificial neural networks work?"<br>    val similarDocs = storage.mostRelevantDocuments(query, count = 3, similarityThreshold = 0.7)<br><br>    println("Documents most similar to query '$query':")<br>    similarDocs.forEach { doc -&gt;<br>        println("- ${doc.content}")<br>    }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></div><div class="content sourceset-dependent-content" data-togglable=":rag:vector-storage/jvmMain"><p class="paragraph">A module that provides vector-based document storage and retrieval capabilities for Retrieval-Augmented Generation (RAG) systems.</p><h3 class="">Overview</h3><p class="paragraph">The vector-storage module extends the rag-base module by implementing document storage with vector embeddings. It enables semantic search and similarity-based document retrieval by converting documents into vector representations. Key components include:</p><ul><li><p class="paragraph">The <code class="lang-kotlin">VectorStorage</code> interface that extends <code class="lang-kotlin">DocumentStorageWithPayload</code> to store documents with their vector embeddings</p></li><li><p class="paragraph">The <code class="lang-kotlin">DocumentEmbedder</code> interface for converting documents into vector representations</p></li><li><p class="paragraph">The <code class="lang-kotlin">TextDocumentEmbedder</code> implementation that works with text documents</p></li><li><p class="paragraph">The <code class="lang-kotlin">EmbeddingBasedDocumentStorage</code> class that implements <code class="lang-kotlin">RankedDocumentStorage</code> using vector embeddings for similarity ranking</p></li></ul><p class="paragraph">This module bridges the gap between raw document storage and semantic search capabilities by leveraging vector embeddings to represent document content. It allows for efficient retrieval of documents based on semantic similarity to queries rather than just keyword matching.</p><h3 class="">Example of usage</h3><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">// Example of using VectorStorage with a TextDocumentEmbedder<br>suspend fun createVectorBasedStorage() {<br>    // Create a document embedder<br>    val textReader = object : TextDocumentReader&lt;TextDocument&gt; {<br>        override suspend fun read(document: TextDocument): String = document.content<br>    }<br>    // This would be replaced with your specific Embedder implementation<br>    val client: LLMEmbeddingProvider = YourEmbeddingProviderImplementation()<br>    val model: LLModel = YourEmbeddingModel<br>    val embedder = LLMEmbedder(client, model)<br>    val documentEmbedder = TextDocumentEmbedder(textReader, embedder)<br><br>    // Create a vector storage implementation<br>    // This would be replaced with your specific VectorStorage implementation<br>    val vectorStorage: VectorStorage&lt;TextDocument&gt; = YourVectorStorageImplementation()<br><br>    // Create the embedding-based document storage<br>    val storage = EmbeddingBasedDocumentStorage(documentEmbedder, vectorStorage)<br><br>    return storage<br>}<br><br>// Example of storing and retrieving documents based on semantic similarity<br>suspend fun findSimilarDocuments(storage: RankedDocumentStorage&lt;TextDocument&gt;) {<br>    // Store multiple documents<br>    storage.store(TextDocument("Neural networks are a type of machine learning model."))<br>    storage.store(TextDocument("Deep learning uses multiple layers of neural networks."))<br>    storage.store(TextDocument("Transformers are a type of neural network architecture."))<br>    storage.store(TextDocument("The capital of France is Paris."))<br><br>    // Find documents semantically similar to a query<br>    val query = "How do artificial neural networks work?"<br>    val similarDocs = storage.mostRelevantDocuments(query, count = 3, similarityThreshold = 0.7)<br><br>    println("Documents most similar to query '$query':")<br>    similarDocs.forEach { doc -&gt;<br>        println("- ${doc.content}")<br>    }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></div>    </div>
  </div>
  <h2 class="">Packages</h2>
  <div class="table"><a data-name="130390439%2FPackages%2F-1162451514" anchor-label="ai.koog.rag.vector" id="130390439%2FPackages%2F-1162451514" data-filterable-set=":rag:vector-storage/commonMain,:rag:vector-storage/jvmMain"></a>
    <div class="table-row" data-filterable-current=":rag:vector-storage/commonMain,:rag:vector-storage/jvmMain" data-filterable-set=":rag:vector-storage/commonMain,:rag:vector-storage/jvmMain">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="ai.koog.rag.vector/index.html">ai.koog.rag.vector</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="130390439%2FPackages%2F-1162451514"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag common-like">common</div>
              <div class="platform-tag jvm-like">jvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
  </div>
</div>
    <div class="footer">
        <a href="#content" id="go-to-top-link" class="footer--button footer--button_go-to-top"></a>
        <span>Copyright © 2000-2025 JetBrains s.r.o.</span>
        <span class="pull-right">
            <span>Generated by </span>
            <a class="footer--link footer--link_external" href="https://github.com/Kotlin/dokka">
                <span>dokka</span>
            </a>
        </span>
    </div>
            </div>
        </div>
    </div>
</body>
</html>
